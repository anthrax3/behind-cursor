<html>
<head>
  <title>behind-cursor component</title>
  <style>
    [contenteditable] {
      outline: none;
    }
  </style>
</head>
<body>
  <h1>behind-cursor component</h1>

  <div id="editor" contenteditable="true">
    <h1>Illa tamen simplicia, vestra versuta.</h1><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Illud quaero, quid ei, qui in voluptate summum bonum ponat, consentaneum sit dicere. Illud non continuo, ut aeque incontentae. Duo Reges: constructio interrete. Eam si varietatem diceres, intellegerem, ut etiam non dicente te intellego;</p><blockquote cite='http://loripsum.net'>Non prorsus, inquit, omnisque, qui sine dolore sint, in voluptate, et ea quidem summa, esse dico.</blockquote><p><a href='http://loripsum.net/' target='_blank'>Quibusnam praeteritis?</a> Ita multa dicunt, quae vix intellegam. Hoc enim constituto in philosophia constituta sunt omnia. <a href='http://loripsum.net/' target='_blank'>Restatis igitur vos;</a> Refert tamen, quo modo. An tu me de L. <a href='http://loripsum.net/' target='_blank'>Idemne, quod iucunde?</a> Audeo dicere, inquit.</p><h3>Teneo, inquit, finem illi videri nihil dolere.</h3><p>Est enim effectrix multarum et magnarum voluptatum. Hoc mihi cum tuo fratre convenit. Hinc ceteri particulas arripere conati suam quisque videro voluit afferre sententiam. Nam aliquando posse recte fieri dicunt nulla expectata nec quaesita voluptate. <a href='http://loripsum.net/' target='_blank'>Restatis igitur vos;</a> Tecum optime, deinde etiam cum mediocri amico.</p><pre>
    Iam argumenti ratione conclusi caput esse faciunt ea, quae
    perspicua dicunt, deinde ordinem sequuntur, tum, quid verum
    sit in singulis, extrema conclusio est.

    Ergo adhuc, quantum equidem intellego, causa non videtur
    fuisse mutandi nominis.
    </pre><ul><li>Atque haec ita iustitiae propria sunt, ut sint virtutum reliquarum communia.</li> <li>Sin eam, quam Hieronymus, ne fecisset idem, ut voluptatem illam Aristippi in prima commendatione poneret.</li> <li>Polemoni et iam ante Aristoteli ea prima visa sunt, quae paulo ante dixi.</li> <li>Verba tu fingas et ea dicas, quae non sentias?</li> <li>Haec dicuntur inconstantissime.</li></ul><dl><dt><dfn>Si longus, levis;</dfn></dt><dd>Facete M.</dd><dt><dfn>Quid iudicant sensus?</dfn></dt>
      <dd>Quae diligentissime contra Aristonem dicuntur a Chryippo.</dd>
      <dt><dfn>Facete M.</dfn></dt>
      <dd>Restinguet citius, si ardentem acceperit.</dd>
      <dt><dfn>Sed nimis multa.</dfn></dt>
      <dd>Philosophi autem in suis lectulis plerumque moriuntur.</dd>
      <dt><dfn>In schola desinis.</dfn></dt>
      <dd>Cupit enim d√≠cere nihil posse ad beatam vitam deesse sapienti.</dd>
      <dt><dfn>Memini vero, inquam;</dfn></dt>
      <dd>Quae qui non vident, nihil umquam magnum ac cognitione dignum amaverunt.</dd>
    </dl>


    <ol>
      <li>Est autem officium, quod ita factum est, ut eius facti probabilis ratio reddi possit.</li>
      <li>Possumusne ergo in vita summum bonum dicere, cum id ne in cena quidem posse videamur?</li>
    </ol>


    <h2>His singulis copiose responderi solet, sed quae perspicua sunt longa esse non debent.</h2>

    <p>Dici enim nihil potest verius. Nos quidem Virtutes sic natae sumus, ut tibi serviremus, aliud negotii nihil habemus. Aliter enim nosmet ipsos nosse non possumus. <a href='http://loripsum.net/' target='_blank'>Tria genera bonorum;</a> Nam illud vehementer repugnat, eundem beatum esse et multis malis oppressum. Etsi ea quidem, quae adhuc dixisti, quamvis ad aetatem recte isto modo dicerentur. <b>Satis est ad hoc responsum.</b> Istam voluptatem, inquit, Epicurus ignorat? </p>

    <p>Sed haec nihil sane ad rem; Duo enim genera quae erant, fecit tria. Nunc omni virtuti vitium contrario nomine opponitur. Non enim, si malum est dolor, carere eo malo satis est ad bene vivendum. <a href='http://loripsum.net/' target='_blank'>Nulla erit controversia.</a> </p>
  </div>

  <script src="../build/build.js" type="text/javascript"></script>
  <script type="text/javascript">
    var behind = require('behind-cursor');
    var throttle = require('per-frame');

    editor.oninput = throttle(function() {
      var sel = window.getSelection();

      var offset = behind('lol', sel);
      if (~offset) console.log('you wrote lol at %s', offset);
      if (~behind('hi there', sel)) console.log('you wrote hi there');
    }, false);

  </script>
</body>
</html>
